<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, content-scale=1.0">
</head>
<body>
    <label for="email">PayPal Email:</label><br>
    <input type="text" id="email" required autocomplete="email"><br><br>

    <label for="itemName">Item Name:</label><br>
    <input type="text" id="itemName" list="products" required>
    <datalist id="products">
        <option value="eBook: Mastering Digital Marketing"></option>
        <!-- ... other options ... -->
    </datalist>
    <br><br>

    <label for="amount">Amount:</label><br>
    <input type="number" id="amount" value="4.5" required><br><br>

    <label for="currency">Currency Code:</label><br>
    <input type="text" id="currency" value="USD" required><br><br>

    <button id="generate">Generate Invoice Link</button><br><br>

    <textarea id="urlInput" rows="10" cols="50" autofocus></textarea><br>

    <script>
        // Function to set a random default value from the datalist
        function setRandomDefault() {
            const datalist = document.getElementById('products');
            const options = Array.from(datalist.options).map(option => option.value);
            const randomIndex = Math.floor(Math.random() * options.length);
            document.getElementById('itemName').value = options[randomIndex];
        }

        // Add event listener to the button for random item selection
        document.getElementById('generate').addEventListener('click', setRandomDefault);

        // Generate PayPal link when "Generate Invoice Link" button is clicked
        document.getElementById('generate').addEventListener('click', function() {
            const email = document.getElementById('email').value.trim();
            const itemName = document.getElementById('itemName').value;
            const amount = document.getElementById('amount').value;
            const currency = document.getElementById('currency').value;
            
            // Generate a random 10-digit order number
            const orderNumber = Math.floor(1000000000 + Math.random() * 9000000000).toString();

            // Construct PayPal link
            const paypalLink = `https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=${encodeURIComponent(email)}&item_name=${encodeURIComponent(itemName)}&amount=${amount}&currency_code=${encodeURIComponent(currency)}&paymentaction=authorization&sra=0&button_subtype=services&no_shipping=1&invoice=${orderNumber}`;

            // Display generated PayPal link in the textarea
            document.getElementById("urlInput").value = paypalLink;

            // Open the link in a new tab
            window.open(paypalLink, '_blank');
        });
    </script>
</body>
</html>
